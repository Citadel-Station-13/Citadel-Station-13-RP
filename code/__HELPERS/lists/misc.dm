/**
 * Converts a bitfield to a list of numbers (or words if a wordlist is provided)
 */
/proc/bitfield2list(bitfield = NONE, list/wordlist)
	var/list/r = list()
	if(islist(wordlist))
		var/max = min(wordlist.len,16)
		var/bit = 1
		for(var/i=1, i<=max, i++)
			if(bitfield & bit)
				r += wordlist[i]
			bit = bit << 1
	else
		for(var/bit=1, bit<=65535, bit = bit << 1)
			if(bitfield & bit)
				r += bit

	return r

#define IS_VALID_INDEX(list, index) (list.len && index > 0 && index <= list.len)
